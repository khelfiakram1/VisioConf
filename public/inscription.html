<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">

    <title>Inscirption</title>
    <link rel="stylesheet" href="css/inscription.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">

</head>

<body>
    <header>
        <nav>
            <ul>
                <li id="logo"><a href="index.html">Acceuil</a></li>
                <li><a href="inscription.html">S'inscrire</a></li>
                <li><a href="connection.html">Se connecter</a></li>
                <li><a href="#contact">Nous contacter</a></li>
                <li><a href="#plus">Plus</a></li>
            </ul>
        </nav>
    </header>
    <div class="container">
        <h2> Créer votre compte ! </h2>
        <input type="text" placeholder="Nom..." id ="nom" required><br>
        <input type="text" placeholder="Prenom..." id = "prenom" required><br>
        <input type="email" placeholder="E-mail..." id = "email" required><br>
        <input type="text" placeholder="Nom d'utilisateur..." id = "username" required><br>
        <input type="password" placeholder="Mot de passe..." id = "password" required><br>
        <button onclick="RegisterUser()"> Soumettre </button>
    </div>
    <script type="module">
        // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAbe-OWPjftb0XvDtcodg_-uiZZvHER6p0",
  authDomain: "visioconf-f663a.firebaseapp.com",
  databaseURL: "https://visioconf-f663a-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "visioconf-f663a",
  storageBucket: "visioconf-f663a.appspot.com",
  messagingSenderId: "392667219886",
  appId: "1:392667219886:web:c19ea37d20adcdd7c36a3f",
  measurementId: "G-B30LGQVYPV"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
        import {getDatabase, ref, set, child, get} from "https://www.gstatic.com/firebasejs/9.6.4/firebase-database.js"
        const db = getDatabase()
        //---------------------------References---------------------------//
       let email = document.getElementById('email').value
    let password = document.getElementById('password').value
    let nom = document.getElementById('nom').value
    let prenom = document.getElementById('prenom').value
    let username = document.getElementById('username').value
    //------------------------------Validation-----------------------------//
    function Validation(){
        let nameregex = /[a-zA-Z]+/;
        let email = /^[^@]+@\w+(\.\w+)+\w$/;

    }
    //---------------------------Registration---------------------------//
    function RegisterUser(){

        const dbRef = ref(db);
        get(child(dbRef,"UsersList/"+ username)).then((snapshot)=>{
            if(snapshot.exists()){
                alert("Account Already Exist");

            }
            else{
                set(ref(db,"UsersList"+ username),{
                    FirstName : nom,
                    LastName : prenom,
                    Email : email,
                    Password : password,
                    Username : username, 
                })
                .then(()=>{
                    alert("Vous avez crée votre compte")
                })
                .catch((error)=>{
                    alert("erreur"+error)
                })
            }

        });

    //------------------------------Assign the event-----------------------------//
       submit.addEventListener('click',RegisterUser) 
    }
      </script>
      <script type="text/javascript" src="script/script.js"></script>

</body>

</html>